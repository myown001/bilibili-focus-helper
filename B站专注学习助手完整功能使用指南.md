# 📚 B站专注学习助手 - 完整功能使用指南

> **版本：** v1.1.5  
> **适用平台：** Chrome浏览器及其衍生浏览器  
> **作用网站：** bilibili.com (哔哩哔哩)

---

## 📖 目录

1. [产品概述](#产品概述)
2. [核心功能详解](#核心功能详解)
3. [快捷键大全](#快捷键大全)
4. [常见问题解答](#常见问题解答)
5. [最佳实践指南](#最佳实践指南)
6. [技术架构说明](#技术架构说明)

---

## 🎯 产品概述

### 产品定位
B站专注学习助手是一款专为在B站学习的用户设计的浏览器插件，通过技术手段帮助用户：
- 🎯 **屏蔽干扰信息**，创造纯净学习环境
- ⏱️ **精准记录学习数据**，量化学习成果
- 📊 **科学评估学习质量**，持续改进学习方法
- 🔒 **防止分心退出**，保持学习专注状态

### 核心价值
- **自动化记录**：无需手动操作，自动记录每一分钟学习时间
- **多维度评估**：从时间效率、专注稳定性、持续专注力、完成度4个维度评分
- **数据可视化**：月历视图、年度热力图、统计图表，直观展示学习轨迹
- **科学引导**：基于数据分析提供个性化改进建议

---

## ⭐ 核心功能详解

### 1. 首页专注模式

**功能描述**：将B站首页替换为极简的专注学习界面，只保留搜索功能。

#### 🎨 界面特点
- **纯净背景**：渐变色背景（#667eea → #764ba2），无任何干扰元素
- **搜索框**：居中显示，支持搜索视频、用户、合集
- **隐藏元素**：
  - ❌ 推荐视频
  - ❌ 热门话题
  - ❌ 广告横幅
  - ❌ 动态消息
  - ❌ 导航栏干扰项

#### 🔍 搜索功能
支持搜索类型：
1. 视频搜索 - 直接输入关键词
2. 用户搜索 - 输入"@用户名"
3. 合集搜索 - 输入"#合集名"

#### 💡 使用场景
- 每次打开B站时，直接进入专注搜索界面
- 避免被推荐内容吸引，浪费学习时间
- 明确目标搜索，提高学习效率

#### 📚 学习资源收藏管理 ⭐ 重要功能

**功能描述**：在专注首页保存常用学习资源的快捷入口，一键直达。

##### 支持的资源类型
- 📺 学习视频
- 📚 视频合集/系列课程
- 👤 UP主主页
- 📝 专栏文章
- 📂 分区页面（如：知识区、科技区）
- 🎬 播放列表

##### 使用流程

**添加资源**：
1. 点击右上角"添加合集"按钮
2. 填写信息：
   - 名称：如"高等数学全集"、"3Blue1Brown主页"
   - 链接：B站URL（视频/合集/UP主/专栏等）
   - 描述：可选，如"同济版高数课程"
3. 点击"添加"，自动保存

**管理资源**：
- 📋 卡片展示：所有收藏以美观的卡片形式展示
- 🖱️ 一键打开：点击卡片或"打开"按钮，新标签页直达
- 🗑️ 删除管理：点击"删除"按钮移除不需要的资源
- 💾 自动保存：所有操作自动保存，刷新后仍然保留

##### 界面设计
- **网格布局**：响应式设计（手机1列、平板2列、桌面3-4列）
- **B站风格**：淡蓝色边框、悬停效果
- **空状态提示**：无收藏时显示引导图标和文字

##### 数据存储
- **三重备份**：chrome.storage + localStorage + localStorage_backup
- **防丢失**：多重备份机制确保数据安全

##### 典型使用场景

**场景1：建立学习资源库**
```
第一次使用：
1. 添加"高等数学合集" → 链接到课程播放列表
2. 添加"线性代数UP主" → 链接到UP主主页
3. 添加"概率论专栏" → 链接到学习笔记专栏
4. 添加"编程算法合集" → 链接到系列课程
5. 添加"英语学习分区" → 链接到知识区英语板块

结果：首页变成你的专属学习导航页
```

**场景2：日常使用**
```
打开B站 → 专注首页
↓
看到自己的学习资源卡片
↓
点击"高等数学合集" → 继续昨天的课程
↓
学完后返回首页 → 点击下一个学习资源
```

##### 💡 使用建议
- 建议收藏5-10个常用学习资源
- 按学科或主题分类命名
- 定期清理不再需要的资源
- 善用描述字段标注学习进度

---

### 2. 视频专注模式

**功能描述**：在视频页面自动进入全屏模式，提供沉浸式学习体验。

#### 🎬 核心特性

##### 2.1 自动全屏
- **触发时机**：打开视频页面后自动引导进入全屏
- **引导按钮**：显示"开始专注学习"浮动按钮
- **用户点击**：点击后立即进入全屏专注模式

##### 2.2 退出保护机制

**三重保护体系**：

**第一层：提醒语确认**
- 功能：退出前显示自定义提醒语
- 作用：让用户重新思考是否真的需要退出
- 示例提醒语：
  - "你确定要放弃学习吗？坚持就是胜利！"
  - "再学10分钟，你会感谢现在的自己"
  - "想想你的目标，不要轻易放弃"

**第二层：密码验证**
- 功能：输入正确密码才能退出全屏
- 密码要求：至少6位字符
- 验证失败：提示错误，无法退出
- 验证成功：允许退出全屏

**第三层：渐进式退出**
- 退出流程：
  1. 按ESC键 → 显示提醒语
  2. 点击"确认退出" → 要求输入密码
  3. 密码正确 → 平滑退出全屏
  4. 全程有过渡动画，避免突兀感

##### 2.3 界面优化
- **控制栏自动隐藏**：鼠标移开3秒后自动隐藏播放控制栏
- **弹幕过滤**：支持过滤低质量弹幕（可选）
- **深色模式**：支持暗色主题，保护眼睛

#### 🎮 交互细节
全屏状态下：
- 移动鼠标 → 显示控制栏
- 静止3秒 → 控制栏自动隐藏
- 按ESC键 → 触发退出流程（需验证）
- 按F11键 → 也会触发退出流程

##### 2.4 控制栏完整功能 ⭐ 重要特性

**功能描述**：全屏模式下完全保留B站原生控制栏的所有功能，无需退出即可进行各种操作。

#### 🎛️ 控制栏显示机制

**显示方式**：
- 移动鼠标到屏幕底部 → 控制栏立即显示
- 鼠标静止3秒 → 控制栏自动隐藏
- 悬停在控制栏上 → 保持显示（不会自动隐藏）
- 点击任何按钮 → 相应菜单弹出

**设计理念**：
- ✅ 不干扰沉浸式学习（自动隐藏）
- ✅ 需要时随时可用（移动鼠标即显示）
- ✅ 完全兼容B站原生交互（无功能缺失）

#### 📋 可用功能列表

**1. 播放控制** ✅
- 播放/暂停按钮
- 进度条拖动
- 音量调节
- 全屏切换（受密码保护）

**2. 画质设置** ✅
- 清晰度切换（360P、480P、720P、1080P、4K等）
- 自动画质选项
- 根据网络状况调整

**3. 播放速度** ✅
- 速度调节：0.5x、0.75x、1.0x、1.25x、1.5x、1.75x、2.0x
- 快捷键：< 减速、> 加速
- 适合不同学习场景

**4. 选集功能** ✅ **关键功能！**

**操作步骤**：
```
1. 移动鼠标显示控制栏
   ↓
2. 点击"选集"按钮（通常在右侧）
   ↓
3. 弹出选集菜单，显示所有集数
   ↓
4. 点击想看的集数
   ↓
5. 视频自动切换，保持全屏状态
```

**支持的视频类型**：
- 系列课程（如：高数第1-120集）
- 合集视频（如：Python入门教程）
- UP主系列（如：UP主的所有教学视频）
- 分P视频（如：长视频的多个部分）

**使用场景**：
```
场景1：连续学习系列课程
高等数学第1集 → 看完 → 点击选集 → 第2集 → 看完 → 第3集
（全程无需退出全屏）

场景2：跳过已学内容
打开合集 → 点击选集 → 直接跳到第15集（从上次位置继续）

场景3：复习特定章节
打开课程 → 点击选集 → 选择要复习的章节 → 重新学习
```

**5. 字幕功能** ✅
- 开启/关闭字幕
- 字幕语言选择（如：中文、英文）
- 字幕样式调整

**6. 弹幕控制** ✅
- 开启/关闭弹幕
- 弹幕透明度调整
- 弹幕屏蔽设置
- 推荐：学习时关闭弹幕减少干扰

**7. 更多设置** ✅
- 镜像翻转
- 循环播放
- 画面比例
- 其他高级选项

#### 💡 实用技巧

**技巧1：快速切换清晰度**
```
网络卡顿时：
1. 移动鼠标显示控制栏
2. 点击"清晰度"按钮
3. 选择较低清晰度（如：720P → 480P）
4. 继续流畅学习
```

**技巧2：倍速学习**
```
复习已学内容：
1. 点击"播放速度"按钮
2. 选择1.5x或2.0x
3. 快速复习

学习新内容：
1. 保持1.0x正常速度
2. 或选择0.75x慢速
3. 确保理解每个知识点
```

**技巧3：系列课程高效学习**
```
开始学习：
1. 打开合集第1集
2. 进入全屏专注模式
3. 学完后点击选集 → 第2集
4. 继续学完 → 选集 → 第3集
5. ...循环直到学完整个系列

效果：
- 全程保持全屏专注状态
- 无需退出全屏寻找下一集
- 学习体验流畅连贯
- 避免被推荐视频干扰
```

#### ⚠️ 唯一的限制

**退出全屏需要密码验证**
- 这是专注模式的核心保护机制
- 目的：防止学习时随意退出
- 其他所有功能完全不受限制

#### 🎯 功能对比

| 功能 | 是否可用 | 说明 |
|------|---------|------|
| 播放控制 | ✅ | 完全可用 |
| 调整画质 | ✅ | 完全可用 |
| 调整速度 | ✅ | 完全可用 |
| **切换选集** | ✅ | **无需退出全屏** |
| 字幕设置 | ✅ | 完全可用 |
| 弹幕控制 | ✅ | 完全可用 |
| **退出全屏** | ⚠️ | **需要密码验证** |

**总结**：
- ✅ 保留便利性（所有正常功能可用）
- ✅ 保持专注性（退出受保护）
- ✅ 提升效率（无需频繁进出全屏）

##### 2.5 宽屏模式（退出全屏后）⭐ 独特设计

**功能描述**：退出全屏后不会完全回到B站原生界面，而是进入智能过滤的宽屏模式。

#### 🖥️ 页面状态说明

**重要说明**：退出全屏后，插件会持续保护你的专注力！

```
全屏专注 → 退出 → 宽屏过滤模式
                    ↓
                 刷新页面
                    ↓
              宽屏过滤模式（持续）
           （显示"回到全屏"按钮）
```

#### 📺 宽屏模式特性

**保留的内容**：
- ✅ **视频播放器**：宽屏显示，观看体验更好
- ✅ **评论区**：完整可见，可阅读和发表评论
- ✅ **基本信息**：视频标题、UP主、点赞收藏等
- ✅ **互动功能**：点赞、投币、收藏、分享
- ✅ **视频介绍**：查看视频简介和章节

**过滤的内容**：
- ❌ **右侧推荐视频**：避免被相关视频吸引
- ❌ **播放结束推荐**：视频结束后不会自动播放推荐
- ❌ **广告内容**：完全过滤所有广告
- ❌ **首页推送**：屏蔽热门推送内容
- ❌ **直播推荐**：隐藏直播入口

#### 💬 评论区功能

**为什么保留评论区**？
```
学习场景下的评论区价值：

1. 知识补充
   • 看到其他学习者的笔记
   • 发现老师的补充说明
   • 找到勘误和更正

2. 疑问解答
   • 看到别人遇到的同样问题
   • 找到问题的解答
   • 与其他学习者讨论

3. 学习交流
   • 分享自己的理解
   • 标记学习进度
   • 建立学习社区感

4. 动态反馈
   • 查看课程更新通知
   • 了解配套资料链接
   • 获取课程答疑信息
```

#### 🎯 "回到全屏"按钮

**样式特征**：
- 位置：屏幕右下角
- 外观：蓝色圆形浮动按钮
- 图标：全屏箭头图标
- 提示：悬停显示"回到全屏学习模式"

**显示条件**：
- ✅ 当前不在全屏状态
- ✅ 没有退出流程进行中
- ✅ 没有退出对话框显示
- ✅ 启用了自动全屏设置

**点击效果**：
```
点击按钮
  ↓
自动进入全屏
  ↓
按钮隐藏
  ↓
继续专注学习
```

#### 🔄 使用场景

**场景1：正常退出全屏**
```
全屏学习 → 按ESC → 输入密码 → 退出全屏
  ↓
宽屏模式（右下角显示"回到全屏"按钮）
  ↓
点击按钮 → 立即返回全屏
```

**场景2：退出后刷新页面**
```
宽屏模式 → 按F5刷新
  ↓
页面重新加载
  ↓
自动重新应用宽屏过滤
  ↓
"回到全屏"按钮再次出现
  ↓
点击按钮 → 返回全屏继续学习
```

**场景3：记笔记场景**
```
全屏学习 → 退出到宽屏 → 记笔记10分钟
  ↓
期间多次刷新查资料
  ↓
每次刷新后依然是宽屏过滤状态
  ↓
没有推荐内容干扰
  ↓
记完笔记 → 点击"回到全屏"按钮 → 继续学习
```

#### 🚫 如何完全退出专注模式

**如果你真的想回到原生B站界面**：

**方法1：禁用插件（推荐）**
```
1. 点击浏览器工具栏的插件图标
2. 点击"禁用"或"关闭"
3. 刷新页面
4. 回到完整B站原生界面
```

**方法2：浏览器扩展管理**
```
1. 打开 chrome://extensions/
2. 找到"B站专注学习助手"
3. 关闭开关
4. 刷新视频页面
```

#### 📊 状态对比表

| 操作 | 是否保持专注模式 | 推荐内容 | 引导按钮 |
|------|---------------|---------|---------|
| 退出全屏 | ✅ 是（宽屏） | ❌ 已屏蔽 | ✅ 显示 |
| **刷新页面** | **✅ 是（宽屏）** | **❌ 已屏蔽** | **✅ 显示** |
| 禁用插件 | ❌ 否 | ✅ 显示 | ❌ 无 |

#### 💪 这个设计的优势

**1. 持续保护专注力**
```
传统做法：用户刷新页面 → 回到原生界面 → 被推荐吸引
我们的设计：用户刷新页面 → 继续宽屏过滤 → 保持专注
```

**2. 灵活的专注度控制**
```
100%专注：全屏模式（点击按钮即可）
 80%专注：宽屏模式（可看评论，无推荐）
  0%专注：禁用插件（需要主动操作）
```

**3. 防止"逃避"行为**
```
学生可能尝试：
❌ 刷新页面逃避专注模式
❌ 关闭再打开逃避全屏

实际效果：
✅ 刷新后仍在专注保护中
✅ 需要主动禁用插件才能退出
✅ 增加了"放弃学习"的成本
```

#### ⚙️ 首页设置

- 入口：首页右上角“设置”(齿轮) 按钮
- 包含：重置密码、编辑提醒语、重置所有设置
- 生效：保存后立即生效（无需刷新）
- 存储：仅保存在本地 `chrome.storage.local`

---

### 3. 首次使用设置

**功能描述**：首次安装插件后，引导用户完成必要设置。

#### 📝 设置流程

##### 步骤1：密码设置
- 界面：美观的对话框界面
- 要求：
  - 密码长度 ≥ 6位
  - 需要确认密码（输入两次）
  - 密码不能为空
- 提示：建议设置一个能记住但不太简单的密码

##### 步骤2：提醒语数量选择
- 选项：1条、2条、3条（推荐）、5条提醒语
- 说明：每次退出时随机显示一条

##### 步骤3：提醒语内容设置
- 输入方式：逐条输入
- 每条要求：不能为空
- 示例：
  - 提醒语1: "坚持学习，你可以的！"
  - 提醒语2: "想想你的目标，不要放弃"
  - 提醒语3: "再学一会儿，你会感谢自己"

##### 步骤4：完成设置
- 提示：设置已保存，开始专注学习
- 状态：isFirstTime = false
- 后续：不再显示设置向导

#### 🎨 界面设计
- **渐变背景**：#667eea → #764ba2
- **白色卡片**：圆角、阴影效果
- **流畅动画**：淡入、滑动效果
- **响应式设计**：适配不同屏幕尺寸

---

### 4. 番茄钟计时器

**功能描述**：提供可拖拽的番茄钟工具，支持倒计时和正计时两种模式。

#### ⏱️ 两种模式

##### 4.1 倒计时模式（番茄钟）
默认设置：
- 工作时长：25分钟
- 休息时长：5分钟

工作流程：
1. 点击"开始" → 开始倒计时
2. 25分钟后 → 播放提示音
3. 自动切换 → 进入5分钟休息
4. 休息结束 → 提示开始下一个番茄钟

完成记录：
- 记录完成的番茄钟数量
- 显示"完成：X个"

##### 4.2 正计时模式
- 功能：从0开始计时
- 用途：记录自由学习时长、不限时间的学习任务
- 操作：开始/暂停/重置

#### 🎨 界面特性

**可拖拽设计**
- 拖拽方式：鼠标点击顶部标题栏
- 拖动到任意位置
- 位置记忆：自动保存拖拽位置

**UI元素**
- 顶部：🍅 番茄图标、模式标签、× 关闭按钮
- 中部：大号时间显示、进度条
- 底部：开始/暂停/重置/切换模式/设置按钮
- 提示区：快捷键提示、完成数量统计

#### ⚙️ 设置选项
可自定义参数：
- 工作时长（5-60分钟）
- 休息时长（1-30分钟）
- 默认模式（倒计时/正计时）

#### ⌨️ 快捷键
**Ctrl + Shift + T** - 显示/隐藏番茄钟（支持全局使用）

---

### 5. 学习数据记录系统

**功能描述**：自动记录所有学习数据，无需手动操作。

#### 📊 记录内容

##### 5.1 时间维度
- **总学习时长（秒）**：从进入视频到离开的总时间（包括暂停）
- **有效学习时长（秒）**：视频实际播放时间（不包括暂停）
- **最长连续学习时长（秒）**：单次连续学习的最长时间

##### 5.2 行为维度
- **暂停次数**：记录视频暂停操作次数
- **退出全屏次数**：记录尝试退出全屏的次数
- **切换标签次数**：记录切换到其他标签页的次数

##### 5.3 内容维度
- **学习视频列表**：视频BV号、标题、观看时长、观看进度
- **视频分类**：自动识别视频分类，统计各分类学习时长

#### 💾 存储机制

**按周分片存储**
```
存储键格式：study_2025_W42
- study: 固定前缀
- 2025: 年份
- W42: 第42周（ISO 8601标准）

数据结构：
{
  "2025-10-18": {
    t: 3600,     // 总时长（秒）
    e: 3200,     // 有效时长（秒）
    p: 5,        // 暂停次数
    x: 2,        // 退出次数
    s: 3,        // 切换次数
    l: 1800,     // 最长连续时长
    v: {         // 视频数据
      "BV1xx": {
        t: 1200,  // 观看时长
        title: "视频标题"
      }
    }
  }
}
```

**数据压缩**
- 原因：节省存储空间，提高读取速度
- 方法：键名缩写、去除冗余信息、分片存储
- 优势：存储空间减少70%，读取速度提升50%

#### 🔄 实时同步
触发时机：
- 每隔30秒自动保存
- 视频暂停时保存
- 切换页面时保存
- 退出全屏时保存

容错机制：
- 保存失败自动重试（最多3次）
- 本地localStorage备份
- 数据校验，防止损坏

---

### 6. 学习质量评分

**功能描述**：基于学习数据，从4个维度科学评估学习质量，满分100分。

#### 📐 评分维度

##### 6.1 时间有效率（权重35%）⭐最重要
**计算公式**：时间有效率 = (有效学习时长 / 总学习时长) × 100%

**评分标准**：
- ≥90% → 100分（极优）
- ≥80% → 90分（优秀）
- ≥70% → 80分（良好）
- ≥60% → 70分（及格）
- ≥50% → 60分（一般）
- <50% → 按实际比例计分（需改进）

**实例分析**：
✅ 好例子：学习60分钟，视频播放55分钟，有效率 = 92% → 高分
❌ 差例子：学习60分钟，视频播放25分钟，有效率 = 42% → 低分

**改进建议**：
- 减少暂停次数
- 提前准备笔记工具
- 遇到问题先记录，课后查

##### 6.2 专注稳定性（权重30%）
**计算方法**：
```
加权干扰次数 = 暂停次数 × 1 + 退出次数 × 1.5 + 切换次数 × 0.5
干扰密度 = 加权干扰次数 / (总时长/3600)
稳定性得分 = 100 - (干扰密度 × 衰减系数)
```

**衰减系数**：
- 干扰密度 ≤5 → 系数1.0
- 干扰密度 ≤10 → 系数1.5
- 干扰密度 ≤20 → 系数2.0
- 干扰密度 >20 → 系数3.0

**评分标准**：
- ≥85分 → 极优（干扰极少）
- ≥70分 → 优秀（干扰较少）
- ≥55分 → 良好（干扰一般）
- ≥40分 → 及格（干扰较多）
- <40分 → 需改进（干扰频繁）

##### 6.3 持续专注力（权重25%）
**计算公式**：持续比例 = (最长连续学习时长 / 总学习时长) × 100%

**评分标准**：
- ≥50% → 100分（优秀）
- ≥40% → 85分（良好）
- ≥30% → 70分（及格）
- ≥20% → 55分（一般）
- <20% → 40分（需改进）

**改进建议**：
- 使用番茄钟（Ctrl+Shift+T）
- 设定目标：先专注25分钟
- 提前准备，避免中断

##### 6.4 学习完成度（权重10%）
**基于时长评估**：
- ≥60分钟 → 100分
- ≥45分钟 → 90分
- ≥30分钟 → 75分
- ≥15分钟 → 60分
- <15分钟 → 40分

#### 🎯 综合评分

**计算公式**：
```
总分 = 时间有效率得分 × 0.35
     + 专注稳定性得分 × 0.30
     + 持续专注力得分 × 0.25
     + 学习完成度得分 × 0.10
```

**评级体系**：
- 90-100分 → ⭐⭐⭐⭐⭐ 卓越
- 80-89分 → ⭐⭐⭐⭐ 优秀
- 70-79分 → ⭐⭐⭐ 良好
- 60-69分 → ⭐⭐ 及格
- 50-59分 → ⭐ 一般
- <50分 → ⚠️ 需改进

#### 💡 改进建议系统

根据4个维度得分，自动生成个性化建议：

**如果"时间有效率"低**：
- 📌 减少暂停时间
- 提前准备好笔记本和笔
- 问题先记下来，课后统一查

**如果"专注稳定性"低**：
- 📌 减少干扰
- 关闭无关标签页
- 手机静音或飞行模式

**如果"持续专注力"低**：
- 📌 延长专注时间
- 使用番茄钟
- 设定目标：先专注25分钟

**如果"学习完成度"低**：
- 📌 增加学习时长
- 设定每日学习目标
- 分时段学习

---

### 7. 数据可视化

**功能描述**：多种可视化方式展示学习数据，直观了解学习情况。

#### 📅 月历视图

**功能特点**：
- 显示当月每一天的学习情况
- 有学习数据的日期高亮显示
- 今天标记为特殊颜色
- 导航功能：上个月/下个月

**交互功能**：
鼠标悬停在有数据的日期上，弹出详细信息卡片：
```
2025-10-18（周五）
📚 总时长：2小时15分钟
⭐ 有效时长：1小时58分钟（87%）
📹 学习视频：3个
⏸️ 暂停次数：5次

视频列表：
• 高等数学-第一章
• 线性代数-特征值
• 概率论-贝叶斯定理

💡 完整列表请查看导出数据
```

#### 🔥 年度热力图

**功能特点**：
- 显示范围：从首次学习日期开始，364天（52周）
- 每周一行，从周一到周日
- 颜色编码：
  - level-0: #ebedf0（无数据）
  - level-1: #9be9a8（少量学习）
  - level-2: #40c463（中等学习）
  - level-3: #30a14e（较多学习）
  - level-4: #216e39（大量学习）

**GitHub风格设计**：
- 横向按周排列
- 纵向按星期排列
- 小方格代表一天
- 图例：少 ▢ ▣ ▣ ▣ ▣ 多

**交互功能**：
悬停提示示例：
```
2025-10-18（周五） 📚 2h15m | 📹 3个视频 | ⭐ 87%
```

#### 📊 统计图表

**图表类型**：柱状图
- X轴：日期/周/月
- Y轴：学习时长（分钟）
- 双色柱：蓝色（总时长）、绿色（有效时长）

**三种视图**：
1. **最近7天（按日）** - 默认
   - 显示每天的数据
   - 适合查看近期详情

2. **最近4周（按周）**
   - 显示每周的汇总数据
   - 适合查看周趋势

3. **最近12个月（按月）**
   - 显示每月的汇总数据
   - 适合查看长期趋势

**交互功能**：
- 悬停显示精确时长
- 下拉选择框切换视图
- 平滑过渡动画

#### 📈 质量评分卡片

**显示内容**：
- 总分：85 / 100
- 评级图标：⭐⭐⭐⭐
- 评级文字：优秀
- 评价语：学习状态很好，保持下去

**四维度进度条**：
```
时间有效率    ████████████████░░░░  87%
专注稳定性    ███████████████████░  92分
持续专注力    █████████████░░░░░░░  65%
学习完成度    ████████████████████  100分
```

**改进建议**：
```
💡 改进建议
📌 延长专注时间
   使用番茄钟（Ctrl+Shift+T）
   设定目标：先专注25分钟
```

---

### 8. 数据导出功能

**功能描述**：将学习数据导出为多种格式，方便查看和分享。

#### 📋 导出流程

**步骤1：选择报告类型**
- 📅 今日详细报告
- 📊 最近7天报告
- 📈 最近30天报告
- 📝 自定义日期报告
- 💾 原始数据导出

**步骤2：选择导出格式**
- ✅ Markdown (.md)
- ✅ HTML (.html)
- ✅ 图片 (.png)
- ✅ CSV (.csv) - 仅原始数据
- ✅ JSON (.json) - 仅原始数据

**步骤3：生成并下载**
- 自动触发浏览器下载
- 文件名格式：bilibili-study-today-2025-10-18.md

#### 📄 导出格式详解

##### 8.1 Markdown格式
**适用场景**：在笔记软件中查看（Notion、Obsidian、Typora等）

**内容结构**：
```markdown
# B站学习报告 - 2025年10月18日

## 📊 学习概况
- 总学习时长：2小时15分钟
- 有效学习时长：1小时58分钟
- 时间利用率：87%
- 学习质量评分：85分 ⭐⭐⭐⭐

## 📚 学习视频列表
1. 高等数学-第一章 (45分钟)
2. 线性代数-特征值 (50分钟)

## ⏱️ 学习时间线
- 09:00-09:45 高等数学-第一章
- 10:00-10:50 线性代数-特征值

## 📈 质量分析
- 时间有效率：87% - 优秀
- 专注稳定性：92分 - 极优

## 💡 改进建议
- 延长单次专注时间
```

##### 8.2 HTML格式
**适用场景**：浏览器查看、打印、分享

**特点**：
- 美观的网页设计
- 响应式布局
- 打印友好
- 包含CSS样式

##### 8.3 图片格式（PNG）
**适用场景**：分享到社交媒体、朋友圈、群聊

**生成原理**：
- 技术：html2canvas库
- 流程：生成HTML → 渲染 → 截图 → 转PNG
- 特点：高清图片（2x分辨率）

##### 8.4 CSV格式
**适用场景**：Excel分析、数据处理

**数据结构**：
```csv
日期,总时长(分钟),有效时长(分钟),时间利用率,视频数,暂停次数,质量评分
2025-10-12,75,65,87%,2,3,82
2025-10-13,90,82,91%,3,2,88
```

##### 8.5 JSON格式
**适用场景**：程序员、二次开发、数据备份

**数据结构**：
```json
{
  "exportDate": "2025-10-18T15:30:00.000Z",
  "version": "1.1.5",
  "data": {
    "2025-10-18": {
      "total": 8100,
      "effective": 7080,
      "pauseCount": 4
    }
  }
}
```

---

## 🆕 补充的核心功能

### 9. 智能反思分析引擎 ⭐ 重要新增

**功能描述**：基于学习数据自动生成反思问题和改进建议，无需AI，完全基于规则引擎。

#### 🧠 分析维度

##### 9.1 暂停行为分析
触发条件：
- 暂停 >10次 → 警告级别
- 暂停 5-10次 → 提醒级别

生成内容：
- 📋 问题反思：是否因为视频内容难度太大？是否有外界干扰？
- 💡 改进建议：使用"番茄钟"、准备好笔记本、调整播放速度

##### 9.2 标签切换分析
触发条件：
- 切换 >15次 → 警告（频繁分心）
- 切换 5-15次 → 提醒（需要改进）

生成内容：
- 📋 问题反思：切换到其他标签在做什么？是否可以提前准备好资料？
- 💡 改进建议：使用"专注模式"全屏学习、关闭无关标签页

##### 9.3 退出全屏分析
触发条件：
- 退出 >8次 → 警告（严重干扰）
- 退出 3-8次 → 提醒

##### 9.4 专注质量分析
触发条件：
- 质量 <50% → 警告（需要紧急改进）
- 质量 50-70% → 提醒（有提升空间）

##### 9.5 长视频学习分析
触发条件：单视频 >1小时

##### 9.6 学习时长分析
- < 30分钟 → 时长不足警告
- 30-60分钟 → 基础达标
- 1-2小时 → 良好
- 2-3小时 → 优秀
- > 3小时 → 超长学习警告

##### 9.7 碎片化学习分析
触发条件：学习视频 >10个 且 平均时长 <5分钟

##### 9.8 周末vs工作日对比
分析周末和工作日的学习时长、质量差异

---

### 10. 学习时间线生成器 ⭐ 重要新增

**功能描述**：自动生成详细的学习时间轴，精确记录每个学习活动。

#### ⏰ 时间线内容

##### 10.1 视频学习事件
记录信息：开始时间、结束时间、视频标题、学习时长、视频BV号

显示格式：
```
09:00-09:45  📺 高等数学-第一章 (45分钟)
```

##### 10.2 休息间隔检测
检测逻辑：两个视频间隔 >3分钟 → 识别为休息

##### 10.3 完整时间线示例
```
📅 2025年10月18日 学习时间线

09:00-09:45  📺 高等数学-第一章 (45分钟)
09:45-09:50  ☕ 休息 (5分钟)
09:50-10:40  📺 线性代数-特征值 (50分钟)

📊 时间线统计
- 学习视频：4个
- 学习时长：2小时45分钟
- 休息次数：3次
```

#### 🔍 学习模式分析

##### 10.4 最佳学习时段识别
统计每个小时的学习时长，找出学习时长最多的时段

##### 10.5 学习连续性评估
分析平均休息间隔、短休息占比

##### 10.6 学习习惯洞察
- 早鸟型学习者
- 夜猫子型学习者
- 碎片化学习者
- 马拉松式学习者

---

### 11. 通知系统

**功能描述**：通过浏览器原生通知API发送学习提醒。

#### 🔔 通知场景

##### 11.1 学习里程碑通知
- 连续学习25分钟（番茄钟完成）
- 累计学习1小时
- 累计学习2小时

##### 11.2 番茄钟通知
- 工作完成通知：25分钟专注时间已到
- 休息结束通知：准备好了吗？开始下一个番茄钟

##### 11.3 学习提醒通知
- 长时间未学习提醒
- 学习目标达成通知

---

### 12. 多维度数据导出 ⭐ 完整升级

#### 📋 5种报告类型详解

##### 12.1 今日详细报告（推荐）⭐
包含内容：
- 📊 学习概况
- 📚 学习视频列表（完整）
- ⏱️ 学习时间线
- 📈 质量分析
- 🤔 反思与建议（AI级别）
- 🎯 今日总结

适用场景：每日复盘、学习日记、分享给老师/朋友

##### 12.2 周报告（最近7天）
包含内容：
- 📅 本周概览
- 📊 每日数据表
- 📈 趋势分析
- 🏆 本周之最
- 💡 改进建议
- 📋 下周计划建议

##### 12.3 月报告（最近30天）
包含内容：
- 📊 月度总结
- 📅 打卡日历
- 📈 月度趋势
- 🎯 学习轨迹
- 🏅 月度成就
- 🔮 下月展望

##### 12.4 自定义日期报告
功能：选择任意历史日期，查看那天的详细学习记录

##### 12.5 原始数据导出
CSV格式：Excel直接打开
JSON格式：完整的原始数据

---

### 13. 高级数据分析功能

#### 📊 学习模式识别

##### 13.1 学习习惯分类
系统自动识别你的学习类型：
- 🌅 早鸟型 (Morning Lark)
- 🦉 夜猫子型 (Night Owl)
- ⚡ 碎片型 (Fragmented)
- 🏃 马拉松型 (Marathon)

##### 13.2 周期性规律发现
- 工作日 vs 周末对比
- 月度周期分析
- 长期趋势识别

##### 13.3 内容偏好分析
- 学习领域统计
- 深度 vs 广度分析
- 难度偏好识别

---

### 14. 数据安全与隐私

#### 🔒 数据存储机制

##### 14.1 本地存储
- Chrome本地存储（chrome.storage.local）
- 不上传到云端
- 按周分片存储，压缩算法减少70%空间

##### 14.2 数据备份
- 自动备份到localStorage
- 手动导出JSON格式

##### 14.3 隐私保护
- 无需注册
- 不收集个人信息
- 无第三方服务调用

##### 14.4 数据迁移
- 导出JSON格式
- 未来计划：一键导入、云同步

---

### 15. 性能优化技术

#### ⚡ 加载速度优化

##### 15.1 首页专注模式
- 提前拦截渲染
- 关键CSS内联
- 资源屏蔽
- 效果：页面加载速度提升50%

##### 15.2 数据存储优化
- 按周分片
- 数据压缩
- 增量更新
- 缓存机制
- 效果：存储空间减少70%，读写速度提升3倍

##### 15.3 视频页面优化
- 延迟初始化
- 事件监听优化
- DOM操作优化
- 防止B站防御机制

---

## ⌨️ 快捷键大全

### 全局快捷键
```
Mac系统：
  Cmd + Option + R (或 Ctrl + Option + R)
  
Windows/Linux系统：
  Ctrl + Alt + R

功能：打开设置管理（修改密码、编辑提醒语、重置设置）
```

### 番茄钟快捷键
```
Ctrl + Shift + T
功能：显示/隐藏番茄钟
```

### 视频页面快捷键
```
ESC键：尝试退出全屏（触发提醒语确认 → 密码验证）
F11键：浏览器全屏（同样触发退出保护）
```

---

## ❓ 常见问题解答

### 功能相关

**Q1：为什么打开B站首页变成了搜索界面？**
A：这是首页专注模式的核心功能，目的是屏蔽干扰内容，提供纯净学习环境。

**Q2：如何退出视频全屏模式？**
A：按ESC键 → 显示提醒语 → 点击"确认退出" → 输入密码 → 成功退出

**Q3：学习数据会丢失吗？**
A：不会，数据存储在Chrome本地存储，有localStorage备份，自动保存（每30秒）

**Q4：质量评分为什么这么低？**
A：可能因为暂停次数太多、切换标签太频繁、连续学习时间太短。查看"改进建议"

### 技术相关

**Q5：番茄钟在哪里？看不到？**
A：按 Ctrl+Shift+T 显示，可能被隐藏或在屏幕边缘

**Q6：插件在某个页面不工作？**
A：检查URL是否正确（只在bilibili.com域名下工作）、刷新页面、确认插件已启用

**Q7：导出的图片不清晰？**
A：已使用2x分辨率渲染。可尝试导出HTML格式，在浏览器中打印为PDF

**Q8：数据能导入其他设备吗？**
A：可以通过导出JSON格式实现。未来计划：云同步功能

### 使用技巧

**Q9：如何提高学习质量评分？**
A：分阶段提升：
- 第1周目标：60分（了解评分机制）
- 第2周目标：70分（关闭手机通知、减少切换标签）
- 第3周目标：80分（使用番茄钟、延长专注时间）
- 第4周目标：稳定80-90分（保持良好习惯）

**Q10：怎样最有效地使用这个插件？**
A：最佳实践：
- 每天：早上计划、使用番茄钟、晚上查看数据
- 每周：查看周统计图表、分析趋势、导出周报告
- 每月：查看月历和热力图、回顾进展、导出月报告

---

## 🎓 最佳实践指南

### 💡 新手上手路径

#### 第1天：熟悉基础功能
步骤：
1. 安装插件
2. 完成首次设置（密码+提醒语）
3. 打开一个学习视频
4. 体验自动全屏功能
5. 尝试退出全屏（体验保护机制）
6. 查看学习数据统计

目标：
✓ 了解插件基本功能
✓ 完成初始配置
✓ 记录第一天学习数据

#### 第2-7天：养成使用习惯
每天任务：
1. 用专注模式学习30分钟以上
2. 使用番茄钟（Ctrl+Shift+T）
3. 晚上查看当日数据和评分
4. 阅读改进建议

目标：
✓ 形成使用习惯
✓ 学习质量评分≥60分
✓ 了解自己的学习规律

#### 第2周：深度使用
任务：
1. 导出第一份周报告
2. 分析学习时间分布
3. 找到最佳学习时段
4. 调整学习计划

目标：
✓ 学习质量评分≥70分
✓ 发现个人学习规律
✓ 优化学习策略

#### 第3-4周：精通与优化
任务：
1. 质量评分稳定在80分以上
2. 每周导出周报告
3. 尝试所有导出格式
4. 分享学习成果

目标：
✓ 养成良好学习习惯
✓ 数据驱动学习优化
✓ 持续改进学习方法

---

## 🔧 技术架构说明

### 📦 模块组成

```
content/                      # 内容脚本
  ├── utils.js               # 工具函数库
  ├── study-recorder.js      # 学习数据记录
  ├── pomodoro-timer.js      # 番茄钟
  ├── settings-manager.js    # 设置管理
  ├── focused-homepage.js    # 首页专注模式
  ├── focus-mode.js          # 视频专注模式
  ├── exit-handler.js        # 退出处理
  ├── first-time-setup.js    # 首次设置
  └── focus-main.js          # 主入口

popup/                        # 弹窗页面
  ├── popup.html             # 统计界面
  ├── popup.js               # 统计逻辑
  ├── popup.css              # 样式
  ├── quality-analyzer.js    # 质量分析器
  ├── help.html              # 帮助文档
  └── export/                # 导出系统
      ├── export-core.js     # 核心导出逻辑
      ├── export-dialog.js   # 对话框管理
      ├── export-image.js    # 图片生成
      ├── export-reflection.js  # 反思分析
      ├── export-timeline.js    # 时间线生成
      ├── export-utils.js       # 工具函数
      └── export-system.js      # 系统入口

background/                   # 后台脚本
  └── background.js          # Service Worker

lib/                          # 第三方库
  ├── chart.js/              # 图表库
  └── html2canvas/           # HTML转图片
```

### 🔄 数据流程

```
[用户学习] 
    ↓
[study-recorder.js 记录数据]
    ↓
[chrome.storage.local 存储]
    ↓
[popup.js 读取并展示]
    ↓
[quality-analyzer.js 分析评分]
    ↓
[export-system.js 导出报告]
    ↓
[reflection-analyzer.js 生成反思]
```

---

## 📞 技术支持与反馈

### 🐛 问题报告

如遇到问题，请提供以下信息：
1. 浏览器版本
2. 插件版本（v1.1.5）
3. 问题描述
4. 复现步骤
5. 控制台错误信息（F12查看）

### 💬 功能建议

欢迎提出改进建议：
- 新功能需求
- 界面优化建议
- 使用体验反馈
- 文档改进建议

---

## 🎉 总结

### 🌟 核心竞争力

1. **全自动化** - 零手动操作，后台智能记录
2. **多维评估** - 4维度科学评分系统
3. **智能反思** - AI级别的行为分析和建议
4. **可视化强** - 月历、热力图、时间线全覆盖
5. **导出灵活** - 5种报告×3种格式=15种组合
6. **隐私安全** - 完全本地存储，零数据上传
7. **性能优异** - 加载快50%，空间省70%

### 🎯 适用人群

- 📚 在B站学习课程的学生
- 💻 自学编程的开发者
- 🎨 学习设计的创作者
- 📖 备考各类证书的考生
- 🌐 提升技能的职场人士
- 👨‍🏫 监督学生的家长老师
- 🏆 追求高效学习的任何人

### 💪 使用承诺

坚持使用30天，你将获得：
```
✅ 精准的学习数据记录
✅ 科学的学习质量评估
✅ 个性化的改进建议
✅ 清晰的学习轨迹可视化
✅ 持续提升的学习效率
✅ 量化的学习成果展示
```

---

**🚀 开始你的高效学习之旅吧！**

*最后更新：2025年10月20日*  
*文档版本：v2.0*
